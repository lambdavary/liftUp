<?xml version="1.0" encoding="utf-8"?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from cessna.xacro                   | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="cessna">
  <!-- *********************** GAZEBO ROBOT DEFINITION ******************* -->
  <link name="cessna_0/base_link">
    <inertial>
      <mass value="4"/>
      <origin xyz="-0.004 0 0.09271"/>
      <inertia ixx="0.1285315" ixy="0.0" ixz="0.0" iyy="0.1825930" iyz="0.0" izz="0.2666894"/>
    </inertial>
    <collision>
      <geometry>
        <box size="1.0 0.5 0.05"/>
      </geometry>
    </collision>
    <!-- Plane Visual -->
    <visual>
      <geometry>
        <mesh filename="package://ardupilot_sim/agents/cessna/meshes/body.dae" scale="0.1 0.1 0.1"/>
      </geometry>
    </visual>
  </link>
  <!-- Add collision contact and friction params -->
  <gazebo reference="cessna_0/base_link">
    <!-- Collision -->
    <maxVel>100.0</maxVel>
    <minDepth>0.001</minDepth>
    <!-- Friction -->
    <mu1>.1</mu1>
    <mu2>.1</mu2>
  </gazebo>
  <!-- Add visual params -->
  <gazebo reference="cessna_0/base_link">
    <material>Gazebo/Green</material>
  </gazebo>
  <link name="cessna_0/imu_link">
    <inertial>
      <mass value="0.15"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.00001" ixy="0.0" ixz="0.0" iyy="0.00002" iyz="0.0" izz="0.00003"/>
    </inertial>
  </link>
  <joint name="cessna_0/imu_joint" type="revolute">
    <parent link="cessna_0/base_link"/>
    <child link="cessna_0/imu_link"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="1 0 0"/>
    <dynamics damping="1"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <gazebo reference="cessna_0/imu_link">
    <sensor name="imu_sensor" type="imu">
      <pose>0 0 0 3.141593 0 0</pose>
      <always_on>1</always_on>
      <update_rate>1000</update_rate>
    </sensor>
  </gazebo>
  <!--
  <xacro:include filename="$(find ardupilot_sim)/xacro/camera.xacro" />
  <xacro:simple_camera ns="${ns}" 
    frame_rate="30" 
    visualize="false"
    hfov="${33.99*3.14159/180}"
    wpix="640"
    hpix="480"  
    image_topic="/camera/image_raw" 
    cinfo_topic="/camera/camera_info" 
    parent_link="${ns}/base_link">
      <origin xyz="0.179 0 1.0855" rpy="0 0.26179 0"/>
  </xacro:simple_camera>
  -->
  <link name="cessna_0/propeller">
    <inertial>
      <!--Look in iris.xacro or plane.xacro for definition -->
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value=".025"/>
      <inertia ixx="7.5067e-05" ixy="0.0" ixz="0.0" iyy="7.5150e-05" iyz="0.0" izz="6.8275e-07"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://ardupilot_sim/agents/cessna/meshes/cessna_prop.dae" scale="0.1 0.1 0.1"/>
      </geometry>
    </visual>
  </link>
  <joint name="cessna_0/propeller_joint" type="continuous">
    <origin rpy="0 0 0" xyz="0.179 0 0.0855"/>
    <parent link="cessna_0/base_link"/>
    <child link="cessna_0/propeller"/>
    <axis xyz="1 0 0"/>
    <dynamics damping="0.001"/>
  </joint>
  <gazebo reference="cessna_0/propeller">
    <material>Gazebo/Blue</material>
  </gazebo>
  <gazebo>
    <plugin filename="libLiftDragPlugin.so" name="propeller_top_blade">
      <a0>0.4</a0>
      <cla>4.752798721</cla>
      <cda>0.6417112299</cda>
      <cma>0</cma>
      <alpha_stall>1.5</alpha_stall>
      <cla_stall>-3.85</cla_stall>
      <cda_stall>-0.9233984055</cda_stall>
      <cma_stall>0</cma_stall>
      <cp>-0.37 0 0.77</cp>
      <area>.0001</area>
      <air_density>1.2041</air_density>
      <forward>0 -1 0</forward>
      <upward>1 0 0</upward>
      <link_name>cessna_0/propeller</link_name>
    </plugin>
    <plugin filename="libLiftDragPlugin.so" name="propeller_bottom_blade">
      <a0>0.4</a0>
      <cla>4.752798721</cla>
      <cda>0.6417112299</cda>
      <cma>0</cma>
      <alpha_stall>1.5</alpha_stall>
      <cla_stall>-3.85</cla_stall>
      <cda_stall>-0.9233984055</cda_stall>
      <cma_stall>0</cma_stall>
      <cp>-0.37 0 -0.77</cp>
      <area>.0001</area>
      <air_density>1.2041</air_density>
      <forward>0 1 0</forward>
      <upward>1 0 0</upward>
      <link_name>cessna_0/propeller</link_name>
    </plugin>
  </gazebo>
  <link name="cessna_0/left_aileron">
    <inertial>
      <mass value="0.0001"/>
      <inertia ixx="0.0038166" ixy="0" ixz="0" iyy="0.0036" iyz="0" izz="0.003816"/>
    </inertial>
    <visual>
      <geometry>
        <!--mesh root comes from cessna.xacro-->
        <mesh filename="package://ardupilot_sim/agents/cessna/meshes/left_aileron.dae" scale="0.1 0.1 0.1"/>
      </geometry>
      <origin rpy="-0.05 0 0.12" xyz="0.195 -0.36 -0.12"/>
    </visual>
  </link>
  <joint name="cessna_0/left_aileron_joint" type="revolute">
    <parent link="cessna_0/base_link"/>
    <child link="cessna_0/left_aileron"/>
    <origin rpy="0.05 0 -0.12" xyz="-0.145 0.37 0.15"/>
    <axis xyz="0 1 0"/>
    <limit effort="-1" lower="-0.78" upper="0.78" velocity="-1"/>
  </joint>
  <gazebo>
    <plugin filename="libLiftDragPlugin.so" name="left_aileron_plugin">
      <a0>0.05984281113</a0>
      <cla>4.752798721</cla>
      <cda>0.6417112299</cda>
      <cma>-1.8</cma>
      <alpha_stall>0.3391428111</alpha_stall>
      <cla_stall>-3.85</cla_stall>
      <cda_stall>-0.9233984055</cda_stall>
      <cma_stall>0</cma_stall>
      <cp>-0.1 0.2205 0.15</cp>
      <area>8.08255</area>
      <upward>0 0 1</upward>
      <control_joint_rad_to_cl>-2.0</control_joint_rad_to_cl>
      <forward>1 0 0</forward>
      <link_name>cessna_0/base_link</link_name>
      <control_joint_name>cessna_0/left_aileron_joint</control_joint_name>
    </plugin>
  </gazebo>
  <link name="cessna_0/right_aileron">
    <inertial>
      <mass value="0.0001"/>
      <inertia ixx="0.0038166" ixy="0" ixz="0" iyy="0.0036" iyz="0" izz="0.003816"/>
    </inertial>
    <visual>
      <geometry>
        <!--mesh root comes from cessna.xacro-->
        <mesh filename="package://ardupilot_sim/agents/cessna/meshes/right_aileron.dae" scale="0.1 0.1 0.1"/>
      </geometry>
      <origin rpy="0.05 0 -0.12" xyz="0.195 0.36 -0.12"/>
    </visual>
  </link>
  <joint name="cessna_0/right_aileron_joint" type="revolute">
    <parent link="cessna_0/base_link"/>
    <child link="cessna_0/right_aileron"/>
    <origin rpy="-0.05 0 0.12" xyz="-0.145 -0.37 0.15"/>
    <axis xyz="0 1 0"/>
    <limit effort="-1" lower="-0.78" upper="0.78" velocity="-1"/>
  </joint>
  <gazebo>
    <plugin filename="libLiftDragPlugin.so" name="right_aileron_plugin">
      <a0>0.05984281113</a0>
      <cla>4.752798721</cla>
      <cda>0.6417112299</cda>
      <cma>-1.8</cma>
      <alpha_stall>0.3391428111</alpha_stall>
      <cla_stall>-3.85</cla_stall>
      <cda_stall>-0.9233984055</cda_stall>
      <cma_stall>0</cma_stall>
      <cp>-0.1 -0.2205 0.15</cp>
      <area>8.08255</area>
      <upward>0 0 1</upward>
      <control_joint_rad_to_cl>-2.0</control_joint_rad_to_cl>
      <forward>1 0 0</forward>
      <link_name>cessna_0/base_link</link_name>
      <control_joint_name>cessna_0/right_aileron_joint</control_joint_name>
    </plugin>
  </gazebo>
  <link name="cessna_0/elevators">
    <inertial>
      <mass value="0.0001"/>
      <inertia ixx="0.0038166" ixy="0" ixz="0" iyy="0.0036" iyz="0" izz="0.003816"/>
    </inertial>
    <visual>
      <geometry>
        <!--mesh root comes from cessna.xacro-->
        <mesh filename="package://ardupilot_sim/agents/cessna/meshes/elevators.dae" scale="0.1 0.1 0.1"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0.555 0 -0.057"/>
    </visual>
  </link>
  <joint name="cessna_0/elevators_joint" type="revolute">
    <parent link="cessna_0/base_link"/>
    <child link="cessna_0/elevators"/>
    <origin rpy="0 0 0" xyz="-0.555 0 0.057"/>
    <axis xyz="0 1 0"/>
    <limit effort="-1" lower="-0.78" upper="0.78" velocity="-1"/>
  </joint>
  <gazebo>
    <plugin filename="libLiftDragPlugin.so" name="elevators_plugin">
      <forward>1 0 0</forward>
      <link_name>cessna_0/base_link</link_name>
      <control_joint_name>cessna_0/elevators_joint</control_joint_name>
    </plugin>
  </gazebo>
  <link name="cessna_0/rudder">
    <inertial>
      <mass value="0.0001"/>
      <inertia ixx="0.0038166" ixy="0" ixz="0" iyy="0.0036" iyz="0" izz="0.003816"/>
    </inertial>
    <visual>
      <geometry>
        <!--mesh root comes from cessna.xacro-->
        <mesh filename="package://ardupilot_sim/agents/cessna/meshes/rudder.dae" scale="0.1 0.1 0.1"/>
      </geometry>
      <origin rpy="0 0.35 0" xyz="0.36 0 -0.475"/>
    </visual>
  </link>
  <joint name="cessna_0/rudder_joint" type="revolute">
    <parent link="cessna_0/base_link"/>
    <child link="cessna_0/rudder"/>
    <origin rpy="0 -0.35 0" xyz="-0.51 0 0.325"/>
    <axis xyz="0 0 1"/>
    <limit effort="-1" lower="-0.78" upper="0.78" velocity="-1"/>
  </joint>
  <gazebo>
    <plugin filename="libLiftDragPlugin.so" name="rudder_plugin">
      <a0>0.0</a0>
      <cla>4.752798721</cla>
      <cda>0.6417112299</cda>
      <cma>-1.8</cma>
      <alpha_stall>0.3391428111</alpha_stall>
      <cla_stall>-3.85</cla_stall>
      <cda_stall>-0.9233984055</cda_stall>
      <cma_stall>0</cma_stall>
      <cp>-0.6 0 0.155</cp>
      <area>.15329</area>
      <upward>0 1 0</upward>
      <control_joint_rad_to_cl>4.0</control_joint_rad_to_cl>
      <forward>1 0 0</forward>
      <link_name>cessna_0/base_link</link_name>
      <control_joint_name>cessna_0/rudder_joint</control_joint_name>
    </plugin>
  </gazebo>
  <gazebo>
    <plugin filename="libArduPilotPlugin.so" name="cessna_0_arduplane_plugin">
      <fdm_addr>127.0.0.1</fdm_addr>
      <fdm_port_in>9002 </fdm_port_in>
      <fdm_port_out>9003</fdm_port_out>
      <!--
            Require by APM :
            Only change model and gazebo from XYZ to XY-Z coordinates
        -->
      <modelXYZToAirplaneXForwardZDown>0 0 0 0 0 0</modelXYZToAirplaneXForwardZDown>
      <gazeboXYZToNED>0 0 0 3.141593 0 1.57079</gazeboXYZToNED>
      <imuName>cessna_0/imu_link::imu_sensor</imuName>
      <connectionTimeoutMaxCount>5</connectionTimeoutMaxCount>
      <control channel="2">
        <type>VELOCITY</type>
        <offset>0</offset>
        <p_gain>.1</p_gain>
        <i_gain>0</i_gain>
        <d_gain>0</d_gain>
        <i_max>0</i_max>
        <i_min>0</i_min>
        <cmd_max>2.5</cmd_max>
        <cmd_min>0</cmd_min>
        <jointName>cessna_0/propeller_joint</jointName>
        <multiplier>838</multiplier>
        <rotorVelocitySlowdownSim>1</rotorVelocitySlowdownSim>
      </control>
      <control channel="0">
        <type>POSITION</type>
        <offset>-0.5</offset>
        <p_gain>2.00</p_gain>
        <i_gain>0</i_gain>
        <d_gain>1.50</d_gain>
        <i_max>0</i_max>
        <i_min>0</i_min>
        <cmd_max>1.0</cmd_max>
        <cmd_min>-1.0</cmd_min>
        <multiplier>-1</multiplier>
        <jointName>cessna_0/left_aileron_joint</jointName>
        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>
      </control>
      <control channel="0">
        <type>POSITION</type>
        <offset>-0.5</offset>
        <p_gain>2.00</p_gain>
        <i_gain>0</i_gain>
        <d_gain>1.50</d_gain>
        <i_max>0</i_max>
        <i_min>0</i_min>
        <cmd_max>1.0</cmd_max>
        <cmd_min>-1.0</cmd_min>
        <multiplier>1</multiplier>
        <jointName>cessna_0/right_aileron_joint</jointName>
        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>
      </control>
      <control channel="1">
        <type>POSITION</type>
        <offset>-0.5</offset>
        <p_gain>2.00</p_gain>
        <i_gain>0</i_gain>
        <d_gain>1.50</d_gain>
        <i_max>0</i_max>
        <i_min>0</i_min>
        <cmd_max>1.0</cmd_max>
        <cmd_min>-1.0</cmd_min>
        <multiplier>1</multiplier>
        <jointName>cessna_0/elevators_joint</jointName>
        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>
      </control>
      <control channel="3">
        <type>POSITION</type>
        <offset>-0.5</offset>
        <p_gain>2.00</p_gain>
        <i_gain>0</i_gain>
        <d_gain>1.50</d_gain>
        <i_max>0</i_max>
        <i_min>0</i_min>
        <cmd_max>1.0</cmd_max>
        <cmd_min>-1.0</cmd_min>
        <multiplier>1</multiplier>
        <jointName>cessna_0/rudder_joint</jointName>
        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>
      </control>
    </plugin>
  </gazebo>
</robot>

